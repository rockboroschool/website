var J=Object.defineProperty;var N=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable;var B=(t,e,n)=>e in t?J(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,v=(t,e)=>{for(var n in e||(e={}))X.call(e,n)&&B(t,n,e[n]);if(N)for(var n of N(e))Q.call(e,n)&&B(t,n,e[n]);return t};import{d as Y}from"./index.ff60205e.js";import{j as K,k as tt,l as g,V as w}from"./vendor.7b0b1a93.js";import{s as o}from"./index.ee423bf3.js";const $=()=>{if(!window.aioseo.currentPost||!window.aioseo.currentPost.postType)return"";const t=window.aioseo.currentPost.postType,e=window.aioseo.dynamicOptions.searchAppearance.postTypes[t].customFields;if(!e||!St)return"";const n=()=>{q(2e3)},i=e.replace(/\n/g," ").split(" "),s=[],r=["INPUT","TEXTAREA","IMG"];i.forEach(a=>{const c=document.querySelector(`#${a}`),b=document.querySelectorAll("#the-list > tr"),L=document.querySelectorAll(".acf-field");c&&r.indexOf(c.tagName)!==-1?c.closest(".acf-field")||s.push(c):b.length&&b.forEach(l=>{const f=l.querySelector(`#${l.id}-key`),h=l.querySelector(`#${l.id}-value`);h&&r.indexOf(h.tagName)!==-1&&i.indexOf(f.value)!==-1&&s.push(h)}),L.length&&L.forEach(l=>{if(a!==l.dataset.name)return"";let f=l.querySelector(`[id^="acf"][name$="[${l.dataset.key}]"]`);if(l.dataset.type==="image"&&(f=l.querySelector(".has-value img")),l.dataset.type==="gallery"&&(f=l.querySelector(".acf-gallery-attachment img")),!f||f.type&&f.type==="hidden")return"";if(l.dataset.type==="wysiwyg"){const h=window.setInterval(()=>{window.tinyMCE&&window.tinyMCE.activeEditor&&(window.clearInterval(h),window.tinyMCE.activeEditor.on("keyup",function(){!window.tinyMCE.activeEditor.acf||q(2e3)}))},50),R=function(V){V.forEach(Z=>{if(Z.attributeName==="class"){l.querySelector(".wp-editor-wrap.tmce-active")&&window.tinyMCE&&window.tinyMCE.activeEditor&&window.tinyMCE.activeEditor.on("keyup",function(){q(2e3)});const O=l.querySelector(`[name="acf[${l.dataset.key}]"]`);O&&O.addEventListener("keyup",()=>{q(2e3)})}})},F=new MutationObserver(R),I=l.querySelector(".wp-editor-wrap");I&&F.observe(I,{attributes:!0})}r.indexOf(f.tagName)!==-1&&s.push(f)})});let u="";return s.length&&s.forEach(a=>{let c="";if(a.tagName&&r.indexOf(a.tagName)!==-1&&a.addEventListener("keyup",n),a.value&&(c=a.value),a.tagName==="IMG"&&a.src){const b=a.alt?`alt="${a.alt}"`:"";c=`<img src="${a.src}" ${b}>`}a.value&&a.type&&a.type==="url"&&(c=`<a href="${c}">${c}</a>`),c&&(u+=`${c} `)}),u},bt=t=>{if(!t)return"";const e=document.querySelector(`#${t}`),n=document.querySelectorAll("#the-list > tr"),i=document.querySelectorAll(".acf-field"),s=["INPUT","TEXTAREA","IMG"];let r="";return e&&s.indexOf(e.tagName)!==-1&&(e.closest(".acf-field")||(r=e.tagName==="IMG"?e.getAttribute("src"):e.value)),n.length&&n.forEach(u=>{const a=u.querySelector(`#${u.id}-key`),c=u.querySelector(`#${u.id}-value`);c&&s.indexOf(c.tagName)!==-1&&a.value===t&&(r=c.tagName==="IMG"?c.getAttribute("src"):c.value)}),i.length&&i.forEach(u=>{if(t!==u.dataset.name)return;const a=u.querySelector(`[data-key="${u.dataset.key}"] img`);r=a.tagName==="IMG"?a.getAttribute("src"):a.value}),r},p=()=>document.body.classList.contains("block-editor-page")&&window.wp.data,m=()=>!!(document.querySelector("#wp-content-wrap.tmce-active")||document.querySelector("#wp-content-wrap.html-active")),T=()=>!!(document.body.classList.contains("elementor-editor-active")&&window.elementor),S=()=>!!(document.body.classList.contains("et_pb_pagebuilder_layout")&&window.ET_Builder),A=()=>!!(document.body.classList.contains("seedprod-builder")&&window.seedprod_data),qt=()=>window.aioseo.data.isWooCommerceActive&&window.aioseo.currentPost&&window.aioseo.currentPost.postType==="product";function x(t){return t?K(tt(t).replace(/[\s./]+/g,"-").replace(/[^\w-]+/g,"").toLowerCase(),"-"):""}const et=()=>{const t=window.elementor.documents.getCurrent(),e=[];return t.$element?(t.$element.find(".elementor-widget-container").each((n,i)=>{let s=i.innerHTML.trim();s=s.replaceAll(/<p.*>(<img.*>)<\/p>/g,"$1"),e.push(s)}),e.join(" ")):""},C=()=>({content:et(),title:window.elementor.settings.page.model.get("post_title"),excerpt:window.elementor.settings.page.model.get("post_excerpt")||"",slug:x(window.elementor.settings.page.model.get("post_title")),permalink:window.elementor.config.document.urls.permalink||""}),nt=()=>{const t=g(ET_Builder,"Frames.app.frameElement",document.querySelector("iframe#et-fb-app-frame"));if(!t)return document.createElement("div");const e=t.contentWindow.document.querySelector("#et-fb-app");return 1>e.length?document.createElement("div"):e},ot=()=>{const t=[],e=nt().querySelectorAll(".et_pb_section"),n=new RegExp(["<style.*?</style>","\\[object Object\\]"].join("|"),"gi");for(let i=0;i<e.length;i++){let s=e[i].innerHTML;s=e[i].innerHTML.replace(n,""),s=s.replaceAll(/<p.*>(<img.*>)<\/p>/g,"$1"),t.push(s)}return t.join(" ")},st=()=>{const t=new URL(g(ETBuilderBackendDynamic,"currentPage.permalink",""));return t.searchParams.delete("PageSpeed"),t.href},k=()=>({content:ot(),title:g(ETBuilderBackendDynamic,"postTitle",""),excerpt:g(ETBuilderBackendDynamic,"postMeta.post_excerpt",""),slug:g(ETBuilderBackendDynamic,"postMeta.post_name",""),permalink:st()}),it=t=>{let e;switch(t.type){case"header":e=document.createElement(t.settings.tag),e.innerHTML=t.settings.headerTxt.trim();break;case"image":const n=document.createElement("img");t.settings.altTxt&&n.setAttribute("alt",t.settings.altTxt),t.settings.src&&n.setAttribute("src",t.settings.src),t.settings.noFollow&&n.setAttribute("rel","nofollow"),e=n,t.settings.link&&(e=document.createElement("a"),e.setAttribute("href",t.settings.link),e.innerHTML=n.outerHTML,t.settings.noFollow&&e.setAttribute("rel","nofollow"),t.settings.openNewWindow&&e.setAttribute("target","_blank"));break;case"video":t.settings.type==="youtube"?(e=document.createElement("iframe"),e.setAttribute("src",t.settings.youtubeUrl)):(e=document.createElement("div"),e.innerHTML=t.settings.code);break;case"text":e=document.createElement("div"),e.innerHTML=t.settings.txt.trim();break;case"button":e=document.createElement("a"),e.appendChild(document.createTextNode(t.settings.btnTxt+" "+t.settings.btnSubTxt)),t.settings.link&&e.setAttribute("href",t.settings.link),t.settings.altTxt&&e.setAttribute("alt",t.settings.altTxt),t.settings.src&&e.setAttribute("src",t.settings.src),t.settings.noFollow&&e.setAttribute("rel","nofollow"),t.settings.openNewWindow&&e.setAttribute("target","_blank");break;case"bullet-list":e=document.createElement("ul"),t.settings.items.forEach(i=>{const s=document.createElement("li");s.innerHTML=i.txt,e.appendChild(s)});break;case"custom-html":e=document.createElement("div"),e.innerHTML=t.settings.code;break}return e},at=()=>{const t=[];return JSON.parse(JSON.stringify(g(seedprod_data,"settings.document.sections",[]))).forEach(n=>{n.rows.forEach(i=>{i.cols.forEach(s=>{s.blocks.forEach(r=>{const u=it(r);u&&t.push(u.outerHTML)})})})}),t.join(" ")},rt=()=>{const t=g(seedprod_data,"home_url",""),e=g(seedprod_data,"settings.post_name","");return`${t}/${e}/`},_=()=>({content:at(),title:g(seedprod_data,"settings.post_title",""),excerpt:"",slug:g(seedprod_data,"settings.post_name",""),permalink:rt()}),D=()=>{let t="";return T()&&(t=C().permalink),S()&&(t=k().permalink),A()&&(t=_().permalink),t},ct=()=>{if(o.state["live-tags"].liveTags.permalink)return o.state["live-tags"].liveTags.permalink;let t;if(m()){const e=document.querySelector("#editable-post-name");e&&e.parentElement.href&&(t=e.parentElement.href)}return p()&&(t=window.wp.data.select("core/editor").getPermalink()),t||(t=D()),t&&o.commit("live-tags/updatePermalink",t),t},E=()=>{let t;if(m()){const e=document.querySelector("#editable-post-name");e&&e.parentElement.href&&(t=e.parentElement.href)}return p()&&(t=window.wp.data.select("core/editor").getPermalink()),t||(t=D()),t},lt=async(t=!0)=>{let e=ct();const n=E();e!==n&&(e=n,e&&(o.commit("live-tags/updatePermalink",e),t&&w.prototype.$truSEO.runAnalysis({postId:o.state.currentPost.id,postData:v({},o.state.currentPost),content:P(),slug:E()})))},U=/base64,(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)/g,H=()=>{let t="";return T()&&(t=C().content),S()&&(t=k().content),A()&&(t=_().content),t},ut=()=>{if(o.state["live-tags"].liveTags.post_content)return o.state["live-tags"].liveTags.post_content;let t="";if(m())if(window.tinyMCE||document.querySelector("#wp-content-wrap.html-active"))t=M();else{const e=window.setInterval(()=>{window.tinyMCE&&(window.clearInterval(e),t=M())},50)}return p()&&(t=window.wp.data.select("core/editor").getCurrentPost().content),t||(t=H()),$()&&(t=t+$()),t=t.replace(U,""),t&&o.commit("live-tags/updatePostContent",t),t},P=()=>{let t="";if(m())if(window.tinyMCE||document.querySelector("#wp-content-wrap.html-active"))t=M();else{const e=window.setInterval(()=>{window.tinyMCE&&(window.clearInterval(e),t=M())},50)}return p()&&(t=window.wp.data.select("core/editor").getEditedPostContent()),t||(t=H()),$()&&(t=t+$()),t=t.replace(U,""),t},dt=async(t=!0)=>{let e=ut();const n=P();e!==n&&(e=n,o.commit("live-tags/updatePostContent",e),t&&w.prototype.$truSEO.runAnalysis({postId:o.state.currentPost.id,postData:v({},o.state.currentPost),content:P(),slug:E()}))},M=()=>{let t="";const e=window.tinyMCE?window.tinyMCE.get("content"):"";if(document.querySelector("#wp-content-wrap.tmce-active")&&e)t=e.getContent({format:"raw"});else{const n=document.querySelector("textarea#content");t=n?n.value:""}return t},j=()=>{let t="";return T()&&(t=C().title),S()&&(t=k().title),A()&&(t=_().title),t},pt=()=>{if(o.state["live-tags"].liveTags.post_title)return o.state["live-tags"].liveTags.post_title;let t;if(m()){const e=document.querySelector("#post input#title");t=e?e.value:""}return p()&&(t=window.wp.data.select("core/editor").getCurrentPost().title),t||(t=j()),t&&o.commit("live-tags/updatePostTitle",t),t},mt=()=>{let t;if(m()){const e=document.querySelector("#post input#title");t=e?e.value:""}return p()&&(t=window.wp.data.select("core/editor").getEditedPostAttribute("title")),t||(t=j()),t},gt=async(t=!0)=>{let e=pt();const n=mt();e!==n&&(e=n,o.commit("live-tags/updatePostTitle",e),t&&w.prototype.$truSEO.runAnalysis({postId:o.state.currentPost.id,postData:v({},o.state.currentPost),content:P(),slug:E()}))},W=()=>{let t="";return T()&&(t=C().excerpt),S()&&(t=k().excerpt),A()&&(t=_().excerpt),t},ft=()=>{if(o.state["live-tags"].liveTags.post_excerpt)return o.state["live-tags"].liveTags.post_excerpt;let t;if(m()){const e=document.querySelector("#postexcerpt textarea#excerpt");t=e?e.value:""}return p()&&(t=window.wp.data.select("core/editor").getCurrentPost().excerpt),t||(t=W()),t&&o.commit("live-tags/updatePostExcerpt",t),t},wt=()=>{let t;if(m()){const e=document.querySelector("#postexcerpt textarea#excerpt");t=e?e.value:""}return p()&&(t=window.wp.data.select("core/editor").getEditedPostAttribute("excerpt")),t||(t=W()),t},yt=async(t=!0)=>{let e=ft();const n=wt();e!==n&&(e=n,o.commit("live-tags/updatePostExcerpt",e),t&&w.prototype.$truSEO.runAnalysis({postId:o.state.currentPost.id,postData:v({},o.state.currentPost),content:P(),slug:E()}))},z=()=>{let t="";return T()&&(t=C().slug),S()&&(t=k().slug),A()&&(t=_().slug),t},vt=()=>{if(o.state["live-tags"].permalinkSlug)return o.state["live-tags"].permalinkSlug;let t="";if(m()){const e=document.querySelector("#post_name");e&&(t=x(e.value))}return p()&&(t=window.wp.data.select("core/editor").getCurrentPost().slug),t||(t=z()),t&&o.commit("live-tags/updatePermalinkSlug",t),t},Et=()=>{let t="";if(m()){const e=document.querySelector("#post_name");e&&(t=x(e.value))}if(p()&&(t=window.wp.data.select("core/editor").getEditedPostAttribute("slug")),T()){const e=window.elementor.settings.page.model.get("post_title");e&&(t=x(e))}return t||(t=z()),t},Pt=async(t=!0)=>{let e=vt();const n=Et();e!==n&&(e=n,o.commit("live-tags/updatePermalinkSlug",e),t&&w.prototype.$truSEO.runAnalysis({postId:o.state.currentPost.id,postData:v({},o.state.currentPost),content:P(),slug:E()}))};let d="",y="";const Tt=(t=!0)=>{if(m()){const e=document.querySelectorAll('#post input[name="post_category[]"]:checked');e.length?(d!==e[0].parentNode.innerText&&(d=e[0].parentNode.innerText,o.commit("live-tags/updateTaxonomyTitle",d)),y=Array.from(e).map(n=>n.parentNode.innerText).join(", "),o.commit("live-tags/updateCategories",y)):d!==""&&(d=y="",o.commit("live-tags/updateTaxonomyTitle",d),o.commit("live-tags/updateCategories",y))}if(p()){const e=window.wp.data.select("core").getEntityRecords("taxonomy","category"),n=window.wp.data.select("core/editor").getEditedPostAttribute("categories");if(n&&n.length&&e){const i=e.find(s=>s.id===n[0]);i&&d!==i.name&&(d=i.name,o.commit("live-tags/updateTaxonomyTitle",d)),y=e.filter(s=>n.includes(s.id)).map(s=>s.name).join(", "),o.commit("live-tags/updateCategories",y)}else d!==""&&(d=y="",o.commit("live-tags/updateTaxonomyTitle",d),o.commit("live-tags/updateCategories",y))}t&&w.prototype.$truSEO.runAnalysis({postId:o.state.currentPost.id})},ht=(t=!1)=>{if(o.state.currentPost.context!=="term")return;const e=document.querySelector("#edittag input#name");e&&(o.commit("live-tags/updateTaxonomyTitle",e.value),e.addEventListener("input",()=>{o.commit("live-tags/updateTaxonomyTitle",e.value)}));const n=document.querySelector("#edittag textarea#description");n&&(o.commit("live-tags/updateTaxonomyDescription",n.value),n.addEventListener("input",()=>{o.commit("live-tags/updateTaxonomyDescription",n.value)}));const i=document.querySelector("#edittag input#slug");if(i){const s=x(i.value);o.commit("live-tags/updatePermalinkSlug",s),o.commit("live-tags/updatePermalink",o.state.currentPost.permalink.replace(`/${o.state["live-tags"].permalinkSlug}`,`/${s.replace(/ /gi,"-").replace(/[^a-z0-9-]/gi,"").toLowerCase()}`)),i.addEventListener("input",()=>{o.commit("live-tags/updatePermalinkSlug",s),o.commit("live-tags/updatePermalink",o.state.currentPost.permalink.replace(`/${o.state["live-tags"].permalinkSlug}`,`/${s.replace(/ /gi,"-").replace(/[^a-z0-9-]/gi,"").toLowerCase()}`))})}o.dispatch("savePostState"),t&&w.prototype.$truSEO.runAnalysis({postId:o.state.currentPost.id})},xt=(t=!1)=>{if(o.state.currentPost.postType!=="attachment")return;const e=document.querySelector("textarea#attachment_caption");e&&(o.commit("live-tags/updateAttachmentCaption",e.value),e.addEventListener("input",r=>{o.commit("live-tags/updateAttachmentCaption",r.target.value)}));const n=document.querySelector("textarea#attachment-details-caption");n&&(o.commit("live-tags/updateAttachmentCaption",n.value),n.addEventListener("input",r=>{o.commit("live-tags/updateAttachmentCaption",r.target.value)}));const i=document.querySelector("input#attachment_alt");i&&(o.commit("live-tags/updateAltTag",i.value),i.addEventListener("input",r=>{o.commit("live-tags/updateAltTag",r.target.value)}));const s=document.querySelector("input#attachment-details-alt-text");s&&(o.commit("live-tags/updateAltTag",i.value),s.addEventListener("input",r=>{o.commit("live-tags/updateAltTag",r.target.value)})),t&&w.prototype.$truSEO.runAnalysis({postId:o.state.currentPost.id})},St=()=>!window.aioseo.currentPost||!window.aioseo.currentPost.id?!1:window.aioseo.options.advanced&&window.aioseo.options.advanced.truSeo&&!window.aioseo.currentPost.isSpecialPage&&window.aioseo.currentPost.postType!=="attachment"&&G(),$t=()=>!window.aioseo.screen||!window.aioseo.screen.postType?!1:!!(window.aioseo.options.advanced&&window.aioseo.options.advanced.truSeo&&G(window.aioseo.screen.postType)),G=(t=null)=>{if(t)return!!(window.aioseo.dynamicOptions.searchAppearance.postTypes[t]&&window.aioseo.dynamicOptions.searchAppearance.postTypes[t].advanced&&window.aioseo.dynamicOptions.searchAppearance.postTypes[t].advanced.showMetaBox);if(!window.aioseo.currentPost||!window.aioseo.currentPost.id)return!1;const e=window.aioseo.currentPost.postType,n=window.aioseo.currentPost.termType,i=!!(e&&window.aioseo.currentPost.context==="post"&&window.aioseo.dynamicOptions.searchAppearance.postTypes[e]&&window.aioseo.dynamicOptions.searchAppearance.postTypes[e].advanced&&window.aioseo.dynamicOptions.searchAppearance.postTypes[e].advanced.showMetaBox),s=!!(n&&window.aioseo.currentPost.context==="term"&&window.aioseo.dynamicOptions.searchAppearance.taxonomies[n]&&window.aioseo.dynamicOptions.searchAppearance.taxonomies[n].advanced&&window.aioseo.dynamicOptions.searchAppearance.taxonomies[n].advanced.showMetaBox);return i||s},q=async(t=900,e=!0)=>{Y(async()=>{await gt(!1),await dt(!1),await yt(!1),await Pt(!1),await lt(!1),Tt(!1),ht(!1),xt(!1),e&&w.prototype.$truSEO.runAnalysis({postId:o.state.currentPost.id})},t)};export{qt as a,m as b,$t as c,x as d,P as e,E as f,Et as g,mt as h,p as i,Tt as j,ht as k,xt as l,q as m,bt as n,k as o,C as p,G as s,St as t};
